<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>éŸ³ä¹æ’­æ”¾å™¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-image: url('R-C.gif');
            background-size: cover;
            background-position: center;
        }

       .music-player {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            padding: 20px;
            width: 90%;
            max-width: 400px;
            border: 2px solid #030405;
        }

       .album-cover {
            width: 100%;
            height: 0;
            padding-bottom: 50%;
            background-image: url('3.jpg');
            background-size: contain;
            background-position: center;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 2px solid #040506;
        }

       .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            background-color: #e90909;
            padding: 10px;
            border-radius: 5px;
        }

       .control-button {
            background-color: #a3dbf0;
            color: #fff;
            border: 2px solid #008cb3;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            margin: 0 10px;
            cursor: pointer;
        }

       .progress-bar {
            width: 100%;
            height: 5px;
            background-color: #098f59;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #000000;
            position: relative;
            overflow: hidden; /* é˜²æ­¢çˆ±å¿ƒè¶…å‡ºè¿›åº¦æ¡ */
        }

       .progress-heart {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: red;
            font-size: 18px;
            left: 0;
            cursor: pointer;
        }

       .lyrics-container {
            height: 300px;
            overflow: hidden;
            position: relative;
            border-radius: 5px;
            border: 2px solid #007BFF;
            background-color: transparent;
        }

       .lyrics-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('4.jpg');
            background-size: contain;
            background-position: center;
            opacity: 1;
            z-index: -1;
        }

       .lyrics {
            position: absolute;
            background-color: transparent;
            top: 0;
            left: 0;
            width: 100%;
            transition: top 0.5s ease;
        }

       .lyrics p {
            margin: 10px 0;
            text-align: center;
            color: #333;
        }
    </style>
</head>

<body>
    <div class="music-player">
        <div class="album-cover"></div>
        <div class="controls">
            <button class="control-button" id="backward-button">Êš</button>
            <button class="control-button" id="play-pause-button">ğŸ’—</button>
            <button class="control-button" id="forward-button">É</button>
        </div>
        <div class="progress-bar" id="progress-bar">
            <div class="progress-heart" id="progress-heart">ğŸ’˜</div>
        </div>
        <div class="lyrics-container">
            <div class="lyrics" id="lyrics">
                <p data-time="0">åˆ«è¯´å†è§</p>
                <p data-time="6">æ¼”å”±ï¼šå¤§ç¬¨é’Ÿ</p>
                <p data-time="13">å¤œé£å¹æ•£äº†ä½ çš„èª“è¨€</p>
                <p data-time="19.5">çœ¼æ³ªè—ä¸ä½å¿ƒåº•çš„çœ·æ‹</p>
                <p data-time="25.8">é‚£å¥å†è§åœ¨è€³è¾¹ç›˜æ—‹</p>
                <p data-time="32">å´åƒåˆ€å‰²ä¸€èˆ¬è®©æˆ‘å¿ƒç¢æ— è¨€</p>
                <p data-time="39">åˆ«è¯´å†è§ï¼Œåˆ«è®©çˆ±èµ°è¿œ</p>
                <p data-time="46">æˆ‘çš„ä¸–ç•Œåªå‰©å­¤å•çš„å¤œ</p>
                <p data-time="52.3">å›å¿†å¦‚æ½®æ°´ï¼ŒæŠŠæˆ‘æ·¹æ²¡åœ¨ä»å‰</p>
                <p data-time="59.3">ä½ å¯çŸ¥é“ï¼Œæˆ‘å¤šæƒ³ä½ è¿˜åœ¨èº«è¾¹</p>
                <p data-time="70">è¡—è§’çš„ç¯å…‰é»¯æ·¡å¦‚æ˜¨</p>
                <p data-time="76.8">å›å¿†æ˜¯æˆ‘ä»¬æœ€æ·±çš„æ·é”</p>
                <p data-time="82.4">ç…§ç‰‡é‡Œçš„ç¬‘å®¹è¿˜é‚£ä¹ˆæ¸©çƒ­</p>
                <p data-time="88.8">å¯ä¸ºä½•ç°å®åªå‰©å†·æ¼ å‰²èˆ</p>
                <p data-time="95.5">åˆ«è¯´å†è§ï¼Œåˆ«è®©çˆ±èµ°è¿œ</p>
                <p data-time="102.5">æˆ‘çš„ä¸–ç•Œåªå‰©å­¤å•çš„å¤œ</p>
                <p data-time="108.5">å›å¿†å¦‚æ½®æ°´ï¼ŒæŠŠæˆ‘æ·¹æ²¡åœ¨ä»å‰</p>
                <p data-time="115.5">ä½ å¯çŸ¥é“ï¼Œæˆ‘å¤šæƒ³ä½ è¿˜åœ¨èº«è¾¹</p>
                <p data-time="122.3">å¦‚æœæ—¶é—´èƒ½å€’é€€</p>
                <p data-time="129.5">æˆ‘æ„¿ä¸€ç”Ÿå»å¥‰é™ª</p>
                <p data-time="135.8">å¯å¦‚ä»Šä½ å·²æˆäº†æ³ª</p>
                <p data-time="139.5">å†ä¹Ÿè§¦ç¢°ä¸åˆ°ä½ çš„ç¾</p>
                <p data-time="145.8">åˆ«è¯´å†è§ï¼Œåˆ«è®©çˆ±èµ°è¿œ</p>
                <p data-time="152.9">å³ä½¿æ¢¦ç¢ä¹Ÿè¦ç”¨å¿ƒå»å¿µ</p>
                <p data-time="159.3">ä½ çš„åå­—åˆ»åœ¨æˆ‘çš„èƒ¸å‰</p>
                <p data-time="165.8">å³ä½¿æ­¤ç”Ÿå†ä¸è§ï¼Œçˆ±ä»ä¸å˜</p>
            </div>
        </div>
    </div>
    <audio id="audio" src="åˆ«è¯´å†è§.mp3"></audio>
    <script>
        const playPauseButton = document.getElementById('play-pause-button');
        const backwardButton = document.getElementById('backward-button');
        const forwardButton = document.getElementById('forward-button');
        const progressHeart = document.getElementById('progress-heart');
        const progressBar = document.getElementById('progress-bar');
        const lyrics = document.getElementById('lyrics');
        const lines = lyrics.getElementsByTagName('p');
        const audio = document.getElementById('audio');
        let isPlaying = false;
        let currentTime = 0;
        let currentLine = 0;
        let charIndex = 0;
        let timer;
        let fontSize = 16;
        const maxFontSize = 18;
        let totalTime = 0;
        const skipInterval = 5;
        let isDragging = false;

        // åŠ¨æ€è·å–éŸ³ä¹æ—¶é•¿
        audio.addEventListener('loadedmetadata', function () {
            totalTime = audio.duration;
        });

        // æ¯ç§’æ›´æ–°ä¸€æ¬¡çŠ¶æ€çš„å®šæ—¶å™¨
        const intervalId = setInterval(() => {
            if (isPlaying &&!isDragging) {
                currentTime = audio.currentTime;
                if (currentTime > totalTime) {
                    currentTime = totalTime;
                    isPlaying = false;
                    playPauseButton.textContent = 'ğŸ’—';
                    audio.pause();
                }
                updateProgress();
                updateLyrics();
            }
        }, 1000);

        playPauseButton.addEventListener('click', () => {
            isPlaying =!isPlaying;
            playPauseButton.textContent = isPlaying? 'ğŸ’˜' : 'ğŸ’—';
            if (isPlaying) {
                audio.play();
                // ç‚¹å‡»æ’­æ”¾æ—¶ï¼Œæ ¹æ®å½“å‰æ—¶é—´æ›´æ–°æ­Œè¯æ˜¾ç¤º
                updateLyrics();
            } else {
                audio.pause();
            }
        });

        backwardButton.addEventListener('click', () => {
            currentTime = Math.max(0, currentTime - skipInterval);
            audio.currentTime = currentTime;
            updateProgress();
            updateLyrics();
        });

        forwardButton.addEventListener('click', () => {
            currentTime = Math.min(totalTime, currentTime + skipInterval);
            audio.currentTime = currentTime;
            updateProgress();
            updateLyrics();
        });

        // æ›´æ–°è¿›åº¦æ¡çš„å‡½æ•°
        function updateProgress() {
            const percentage = (currentTime / totalTime) * 100;
            const limitedPercentage = Math.min(100, Math.max(0, percentage)); // é™åˆ¶ç™¾åˆ†æ¯”åœ¨ 0 - 100 ä¹‹é—´
            progressHeart.style.left = `${limitedPercentage}%`;
        }

        // æ›´æ–°æ­Œè¯æ˜¾ç¤ºçš„å‡½æ•°
        function updateLyrics() {
            for (let i = 0; i < lines.length; i++) {
                const lineTime = parseFloat(lines[i].getAttribute('data-time'));
                if (lineTime <= currentTime && (i === lines.length - 1 || parseFloat(lines[i + 1].getAttribute('data-time')) > currentTime)) {
                    if (i!== currentLine) {
                        if (timer) clearInterval(timer);
                        resetLine(lines[currentLine]);
                        currentLine = i;
                        charIndex = 0;
                        fontSize = 16;
                        const currentText = lines[currentLine].textContent;
                        if (currentText.length > 0) {
                            lines[currentLine].innerHTML = '';
                            for (let j = 0; j < currentText.length; j++) {
                                const span = document.createElement('span');
                                span.textContent = currentText[j];
                                lines[currentLine].appendChild(span);
                            }
                            timer = setInterval(() => {
                                if (charIndex < currentText.length) {
                                    const spans = lines[currentLine].getElementsByTagName('span');
                                    spans[charIndex].style.color ='red';
                                    charIndex++;
                                    if (fontSize < maxFontSize) {
                                        fontSize += 0.1;
                                        lines[currentLine].style.fontSize = `${fontSize}px`;
                                    }
                                } else {
                                    clearInterval(timer);
                                }
                            }, 10);
                        }
                        const lineHeight = parseInt(getComputedStyle(lines[0]).height);
                        const targetTop = -(i * lineHeight);
                        lyrics.style.top = `${targetTop}px`;
                    }
                    break;
                }
            }
        }

        // é‡ç½®æ­Œè¯è¡Œæ ·å¼çš„å‡½æ•°
        function resetLine(line) {
            const text = line.textContent;
            line.innerHTML = text;
            if (parseFloat(line.style.fontSize) < maxFontSize) {
                line.style.fontSize = '16px';
            }
            line.querySelectorAll('span').forEach(span => {
                span.style.color = 'initial';
            });
        }

        // æ‹–åŠ¨çˆ±å¿ƒæ§åˆ¶è¿›åº¦æ¡
        progressHeart.addEventListener('mousedown', (e) => {
            isDragging = true;
            const rect = progressBar.getBoundingClientRect();
            const offsetX = rect.left;
            const width = rect.width;

            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);

            function onMouseMove(e) {
                if (isDragging) {
                    const x = e.clientX - offsetX;
                    let percentage = (x / width) * 100;
                    percentage = Math.min(100, Math.max(0, percentage)); // é™åˆ¶ç™¾åˆ†æ¯”åœ¨ 0 - 100 ä¹‹é—´
                    progressHeart.style.left = `${percentage}%`;
                    currentTime = (percentage / 100) * totalTime;
                    audio.currentTime = currentTime;
                    updateLyrics();
                }
            }

            function onMouseUp() {
                isDragging = false;
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
            }
        });
    </script>
</body>

</html>    
